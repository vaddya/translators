\include{settings}

\begin{document}

\include{titlepage}

\tableofcontents
\newpage

\section{Цель работы}

\section{Знакомство с языком \code{yacc}}

\subsection{Взаимодействие модулей \code{Lex} и \code{yacc}}

Рассмотрим взаимодействие модулей на примере программы, считывающей дату в формате \code{MONTH NUMBER NUMBER}.

\yacc{date/v1/v1}

\lex{date/v1/v1}

Подадим программе корректный ввод и ввод, содержащий ошибку (лишнее число после даты).

\inout{date/v1/test1}

\inout{date/v1/test2}

Видно, что в поток вывода было направлено сообщение о синтаксической ошибке ввода.

\subsection{Литеральные лексемы}

Рассмотрим использование литеральных лексем. Добавим возможность задавать дату, разделяя номер дня в месяце и год с помощью литералов \code{','} и \code{';'}. 

\yacc{date/v2/v2}

\lex{date/v2/v2}

Протестируем программу, подав на ввод различные входные последовательности.

Подадим программе корректный ввод и ввод, содержащий ошибку (лишнее число после даты).

\inout{date/v2/test1}

\inout{date/v2/test2}

\inout{date/v2/test3}

Видно, что разделитель теперь является обязательным символом во входной последовательности.

\subsection{Сопутствующие значения}

Рассмотрим пример, вычисляющий величины месяцев.

\lex{date/v3/a/v3}

Реализуем различные варианты использования вычисленной величины внутри \code{yacc}-модуля.

Рассмотрим вывод считанной даты в формате \code{'m-d-y'}.

\yacc{date/v3/a/v3a}

\inout{date/v3/a/test1}

Рассмотрим подсчет количества дней, прошедших от 01/01/1970.

\yacc{date/v3/b/v3b}

\inout{date/v3/b/test1}

Усложним предыдущий пример, рассчитав разницу между двумя датами, заданными в том же формате через тире.

\yacc{date/v3/c/v3c}

\inout{date/v3/c/test1}

Из примеров видно, что сопутствующие примеры позволяют усложнить логику обработки входной последовательности.

\subsection{Сопутствующие значения разных типов}

Рассмотрим применение сопутствующих значений разных типов, реализованных при помощи структуры \code{union}.

Попробуем скомпилировать первую версию:
\begin{lstlisting}[caption={SQL},label={lst:sql}]
vaddya@mi:~/Git/translators/yacc/src/date/v4/a$ ./build.sh 
v4a.y:12.17-18: error: $1 of 'date' has no declared type
{ print($1, $2, $4); }
^^
v4a.y:12.21-22: error: $2 of 'date' has no declared type
{ print($1, $2, $4); }
^^
v4a.y:12.25-26: error: $4 of 'date' has no declared type
{ print($1, $2, $4); }
^^
\end{lstlisting}

Видно, что из-за неуказанных типов переменных. Укажем явно тип переменной при обращении:

\yacc{date/v4/b/v4b}

\inout{date/v4/b/test1}

Используем более удобный способ -- укажем тип переменной в секции объявления токенов:

\yacc{date/v4/c/v4c}

\inout{date/v4/c/test1}

В \code{Lex}-модуле мы обращаемся к \code{yylval} как к варианту \code{union} в языке C (обращение через точку):

\lex{date/v4/c/v4}

Реализуем возможность подсчета дней между двумя датами с использованием сопутствующих значений разных типов:

\yacc{date/v5/v5}

\inout{date/v5/test1}

Из примеров видно, что \code{union} позволяют хранить внутри сопутствующие значения разных типов.

\section{Выводы}

В процессе выполнения данной работы:

\begin{itemize}
	\item 
\end{itemize}

\end{document}
